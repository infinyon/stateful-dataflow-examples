# Mask User Info

The mask user info `dataflow` uses composition to mask Social Security Numbers (SSNs) in records. The example imports the [mask-ssn] package and uses its types and functions in this dataflow.

The following diagram is a visual representation of these operations generated by `sdf`:

<p align="center">
 <img width="600" src="img/mask-user-info.jpg">
</p>

## Prequisites

The packages below are imported by the datafow. You must build them first:
  * [mask-ssn]


## Step-by-step

Take a look at the [dataflow.yaml](./dataflow.yaml) to get an idea of what we're doing.

Make sure to [Install SDF & Start a Cluster].


### Run the Pipeline

Run the pipeline:

```bash
sdf run --ui
```

Use `--ui` to generate the graphical representation and run the Studio.


### Test the Pipeline

1. Produce sentences to in `user-info` topic:

```bash
fluvio produce user-info
```

```json
{"name": "Alice", "ssn": "555-12-1212"}
{"name": "Bob", "ssn": "123-45-6789"}
```

Consume from `masked` to retrieve the result:

```bash
fluvio consume masked -Bd
```

```json
{"name": "Alice", "ssn": "***-**-****"}
{"name": "Bob", "ssn": "***-**-****"}
```

## Clean-up

Exit `sdf` terminal and remove the topics:

```bash
fluvio topic delete user-info
fluvio topic delete masked
```


[Install SDF & Start a Cluster]: /README.MD#prerequisites
[mask-ssn]: ./pkgs/mask-ssn