# Split Sentence

The split sentence `dataflow` uses composition to split sentences into words and counts the number of characters.
The example shows how to import and use two functions from the same package.

The following diagram is a visual representation of these operations generated by `sdf`:

<p align="center">
 <img width="650" src="img/split-sentence.jpg">
</p>

Checkout [dataflows-inline/split-sentence] for the inline variant.

## Prequisites

The packages below are imported by the datafow. You must build them first:
  * [sentence]


## Step-by-step

Take a look at the [dataflow.yaml](./dataflow.yaml) to get an idea of what we're doing.

Make sure to [Install SDF & Start a Cluster].


### Run the Dataflow

Use `sdf` command line tool to run the dataflow:

```bash
sdf run --ui --ephemeral
```

Use `--ui` to generate the graphical representation and run the Studio.


### Test the Dataflow

The sample data file has the following records:

```bash
Hello world
Hi there
```

Produce the data to the `sentences` topic:

```bash
fluvio produce sentences -f ./sample-data/data.txt
```

Checkout the data in `sentences` topic:

```bash
fluvio consume sentences -Bd
```

Consume from `words` to retrieve the result:

```bash
fluvio consume words -Bd
```

```bash
Hello(5)
world(5)
Hi(2)
there(5)
```

### Show State

Check the counters `sdf` terminal:

```bash
>> show state sentence-words/sentence-to-words/metrics --table
 Key    Window  succeeded  failed
 stats  *       2          0
```

```bash
>> show state sentence-words/augment-count/metrics --table
 Key    Window  succeeded  failed
 stats  *       4          0
```

Congratulations! You've successfully built and run a dataflow!


## Clean-up

Exit `sdf` terminal and clean-up. The `--force` flag removes the topics:

```bash
sdf clean --force
```

[dataflows-inline/split-sentence]: ../../dataflows-inline/split-sentence
[Install SDF & Start a Cluster]: /README.MD#prerequisites
[sentence]: ./packages/sentence
